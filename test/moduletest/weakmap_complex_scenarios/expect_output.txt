# Copyright (c) 2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

=== All tests started ===
=== Test 1: Single WeakMap, V references K ===
test1_k1_collected
test1_v1_collected
=== Test 2: Single WeakMap, cyclic references V1->K2, V2->K3, V3->K1 ===
test2_k1_collected
test2_k2_collected
test2_k3_collected
test2_v1_collected
test2_v2_collected
test2_v3_collected
=== Test 3: Two WeakMaps, cross-map cycle ===
test3_k1_collected
test3_k2_collected
test3_v1_collected
test3_v2_collected
=== Test 4: Three WeakMaps, multi-map cycle ===
test4_k1_collected
test4_k2_collected
test4_k3_collected
test4_v1_collected
test4_v2_collected
test4_v3_collected
=== Test 5: V references K, K has external reference ===
test5_k_eventually_collected
=== Test 6: V keeps K alive (V has external ref, V->K) ===
=== Test 7: V does not reference K ===
test7_k_collected
test7_v_collected
=== Test 8: Mixed scenario ===
test8_k3_collected
test8_k4_collected
test8_v3_collected
test8_v4_collected
test8_k1_eventually_collected
test8_k2_eventually_collected
=== Test 9: Deep reference chain ===
test9_k_collected
test9_v1_collected
test9_v2_collected
test9_v3_collected
=== Test 10: Multiple Values, same Key ===
test10_k_collected
test10_v1_collected
test10_v2_collected
test10_v3_collected
=== Test 11: Same Key in multiple WeakMaps ===
test11_k_collected
test11_v1_collected
test11_v2_collected
=== Test 12: WeakMap value is undefined ===
test12_k_collected
=== Test 13: Non-WeakMap value references Key ===
test13_k_collected
test13_v1_collected
test13_v2_collected
=== Test 14: Verify entry deletion ===
test14_k_collected
test14_v_collected
=== Test 15: Long reference chain (200+), single WeakMap ===
test15_k0_collected
test15_k1_collected
test15_k2_collected
test15_k3_collected
test15_k4_collected
test15_k5_collected
test15_k6_collected
test15_k7_collected
test15_k8_collected
test15_k9_collected
test15_k10_collected
test15_k11_collected
test15_k12_collected
test15_k13_collected
test15_k14_collected
test15_k15_collected
test15_k16_collected
test15_k17_collected
test15_k18_collected
test15_k19_collected
test15_k20_collected
test15_k21_collected
test15_k22_collected
test15_k23_collected
test15_k24_collected
test15_k25_collected
test15_k26_collected
test15_k27_collected
test15_k28_collected
test15_k29_collected
test15_k30_collected
test15_k31_collected
test15_k32_collected
test15_k33_collected
test15_k34_collected
test15_k35_collected
test15_k36_collected
test15_k37_collected
test15_k38_collected
test15_k39_collected
test15_k40_collected
test15_k41_collected
test15_k42_collected
test15_k43_collected
test15_k44_collected
test15_k45_collected
test15_k46_collected
test15_k47_collected
test15_k48_collected
test15_k49_collected
test15_k50_collected
test15_k51_collected
test15_k52_collected
test15_k53_collected
test15_k54_collected
test15_k55_collected
test15_k56_collected
test15_k57_collected
test15_k58_collected
test15_k59_collected
test15_k60_collected
test15_k61_collected
test15_k62_collected
test15_k63_collected
test15_k64_collected
test15_k65_collected
test15_k66_collected
test15_k67_collected
test15_k68_collected
test15_k69_collected
test15_k70_collected
test15_k71_collected
test15_k72_collected
test15_k73_collected
test15_k74_collected
test15_k75_collected
test15_k76_collected
test15_k77_collected
test15_k78_collected
test15_k79_collected
test15_k80_collected
test15_k81_collected
test15_k82_collected
test15_k83_collected
test15_k84_collected
test15_k85_collected
test15_k86_collected
test15_k87_collected
test15_k88_collected
test15_k89_collected
test15_k90_collected
test15_k91_collected
test15_k92_collected
test15_k93_collected
test15_k94_collected
test15_k95_collected
test15_k96_collected
test15_k97_collected
test15_k98_collected
test15_k99_collected
test15_k100_collected
test15_k101_collected
test15_k102_collected
test15_k103_collected
test15_k104_collected
test15_k105_collected
test15_k106_collected
test15_k107_collected
test15_k108_collected
test15_k109_collected
test15_k110_collected
test15_k111_collected
test15_k112_collected
test15_k113_collected
test15_k114_collected
test15_k115_collected
test15_k116_collected
test15_k117_collected
test15_k118_collected
test15_k119_collected
test15_k120_collected
test15_k121_collected
test15_k122_collected
test15_k123_collected
test15_k124_collected
test15_k125_collected
test15_k126_collected
test15_k127_collected
test15_k128_collected
test15_k129_collected
test15_k130_collected
test15_k131_collected
test15_k132_collected
test15_k133_collected
test15_k134_collected
test15_k135_collected
test15_k136_collected
test15_k137_collected
test15_k138_collected
test15_k139_collected
test15_k140_collected
test15_k141_collected
test15_k142_collected
test15_k143_collected
test15_k144_collected
test15_k145_collected
test15_k146_collected
test15_k147_collected
test15_k148_collected
test15_k149_collected
test15_k150_collected
test15_k151_collected
test15_k152_collected
test15_k153_collected
test15_k154_collected
test15_k155_collected
test15_k156_collected
test15_k157_collected
test15_k158_collected
test15_k159_collected
test15_k160_collected
test15_k161_collected
test15_k162_collected
test15_k163_collected
test15_k164_collected
test15_k165_collected
test15_k166_collected
test15_k167_collected
test15_k168_collected
test15_k169_collected
test15_k170_collected
test15_k171_collected
test15_k172_collected
test15_k173_collected
test15_k174_collected
test15_k175_collected
test15_k176_collected
test15_k177_collected
test15_k178_collected
test15_k179_collected
test15_k180_collected
test15_k181_collected
test15_k182_collected
test15_k183_collected
test15_k184_collected
test15_k185_collected
test15_k186_collected
test15_k187_collected
test15_k188_collected
test15_k189_collected
test15_k190_collected
test15_k191_collected
test15_k192_collected
test15_k193_collected
test15_k194_collected
test15_k195_collected
test15_k196_collected
test15_k197_collected
test15_k198_collected
test15_k199_collected
=== Test 16: 5 WeakMaps with long cross-reference chains ===
test16_k0_collected
test16_k1_collected
test16_k2_collected
test16_k3_collected
test16_k4_collected
test16_k5_collected
test16_k6_collected
test16_k7_collected
test16_k8_collected
test16_k9_collected
test16_k10_collected
test16_k11_collected
test16_k12_collected
test16_k13_collected
test16_k14_collected
test16_k15_collected
test16_k16_collected
test16_k17_collected
test16_k18_collected
test16_k19_collected
test16_k20_collected
test16_k21_collected
test16_k22_collected
test16_k23_collected
test16_k24_collected
test16_k25_collected
test16_k26_collected
test16_k27_collected
test16_k28_collected
test16_k29_collected
test16_k30_collected
test16_k31_collected
test16_k32_collected
test16_k33_collected
test16_k34_collected
test16_k35_collected
test16_k36_collected
test16_k37_collected
test16_k38_collected
test16_k39_collected
test16_k40_collected
test16_k41_collected
test16_k42_collected
test16_k43_collected
test16_k44_collected
test16_k45_collected
test16_k46_collected
test16_k47_collected
test16_k48_collected
test16_k49_collected
test16_k50_collected
test16_k51_collected
test16_k52_collected
test16_k53_collected
test16_k54_collected
test16_k55_collected
test16_k56_collected
test16_k57_collected
test16_k58_collected
test16_k59_collected
test16_k60_collected
test16_k61_collected
test16_k62_collected
test16_k63_collected
test16_k64_collected
test16_k65_collected
test16_k66_collected
test16_k67_collected
test16_k68_collected
test16_k69_collected
test16_k70_collected
test16_k71_collected
test16_k72_collected
test16_k73_collected
test16_k74_collected
test16_k75_collected
test16_k76_collected
test16_k77_collected
test16_k78_collected
test16_k79_collected
test16_k80_collected
test16_k81_collected
test16_k82_collected
test16_k83_collected
test16_k84_collected
test16_k85_collected
test16_k86_collected
test16_k87_collected
test16_k88_collected
test16_k89_collected
test16_k90_collected
test16_k91_collected
test16_k92_collected
test16_k93_collected
test16_k94_collected
test16_k95_collected
test16_k96_collected
test16_k97_collected
test16_k98_collected
test16_k99_collected
test16_k100_collected
test16_k101_collected
test16_k102_collected
test16_k103_collected
test16_k104_collected
test16_k105_collected
test16_k106_collected
test16_k107_collected
test16_k108_collected
test16_k109_collected
test16_k110_collected
test16_k111_collected
test16_k112_collected
test16_k113_collected
test16_k114_collected
test16_k115_collected
test16_k116_collected
test16_k117_collected
test16_k118_collected
test16_k119_collected
test16_k120_collected
test16_k121_collected
test16_k122_collected
test16_k123_collected
test16_k124_collected
test16_k125_collected
test16_k126_collected
test16_k127_collected
test16_k128_collected
test16_k129_collected
test16_k130_collected
test16_k131_collected
test16_k132_collected
test16_k133_collected
test16_k134_collected
test16_k135_collected
test16_k136_collected
test16_k137_collected
test16_k138_collected
test16_k139_collected
test16_k140_collected
test16_k141_collected
test16_k142_collected
test16_k143_collected
test16_k144_collected
test16_k145_collected
test16_k146_collected
test16_k147_collected
test16_k148_collected
test16_k149_collected
test16_k150_collected
test16_k151_collected
test16_k152_collected
test16_k153_collected
test16_k154_collected
test16_k155_collected
test16_k156_collected
test16_k157_collected
test16_k158_collected
test16_k159_collected
test16_k160_collected
test16_k161_collected
test16_k162_collected
test16_k163_collected
test16_k164_collected
test16_k165_collected
test16_k166_collected
test16_k167_collected
test16_k168_collected
test16_k169_collected
test16_k170_collected
test16_k171_collected
test16_k172_collected
test16_k173_collected
test16_k174_collected
test16_k175_collected
test16_k176_collected
test16_k177_collected
test16_k178_collected
test16_k179_collected
test16_k180_collected
test16_k181_collected
test16_k182_collected
test16_k183_collected
test16_k184_collected
test16_k185_collected
test16_k186_collected
test16_k187_collected
test16_k188_collected
test16_k189_collected
test16_k190_collected
test16_k191_collected
test16_k192_collected
test16_k193_collected
test16_k194_collected
test16_k195_collected
test16_k196_collected
test16_k197_collected
test16_k198_collected
test16_k199_collected
=== Test 17: 5 WeakMaps with deep nesting and cross refs ===
test17_k0_collected
test17_k1_collected
test17_k2_collected
test17_k3_collected
test17_k4_collected
test17_k5_collected
test17_k6_collected
test17_k7_collected
test17_k8_collected
test17_k9_collected
test17_k10_collected
test17_k11_collected
test17_k12_collected
test17_k13_collected
test17_k14_collected
test17_k15_collected
test17_k16_collected
test17_k17_collected
test17_k18_collected
test17_k19_collected
test17_k20_collected
test17_k21_collected
test17_k22_collected
test17_k23_collected
test17_k24_collected
test17_k25_collected
test17_k26_collected
test17_k27_collected
test17_k28_collected
test17_k29_collected
test17_k30_collected
test17_k31_collected
test17_k32_collected
test17_k33_collected
test17_k34_collected
test17_k35_collected
test17_k36_collected
test17_k37_collected
test17_k38_collected
test17_k39_collected
test17_k40_collected
test17_k41_collected
test17_k42_collected
test17_k43_collected
test17_k44_collected
test17_k45_collected
test17_k46_collected
test17_k47_collected
test17_k48_collected
test17_k49_collected
test17_k50_collected
test17_k51_collected
test17_k52_collected
test17_k53_collected
test17_k54_collected
test17_k55_collected
test17_k56_collected
test17_k57_collected
test17_k58_collected
test17_k59_collected
test17_k60_collected
test17_k61_collected
test17_k62_collected
test17_k63_collected
test17_k64_collected
test17_k65_collected
test17_k66_collected
test17_k67_collected
test17_k68_collected
test17_k69_collected
test17_k70_collected
test17_k71_collected
test17_k72_collected
test17_k73_collected
test17_k74_collected
test17_k75_collected
test17_k76_collected
test17_k77_collected
test17_k78_collected
test17_k79_collected
test17_k80_collected
test17_k81_collected
test17_k82_collected
test17_k83_collected
test17_k84_collected
test17_k85_collected
test17_k86_collected
test17_k87_collected
test17_k88_collected
test17_k89_collected
test17_k90_collected
test17_k91_collected
test17_k92_collected
test17_k93_collected
test17_k94_collected
test17_k95_collected
test17_k96_collected
test17_k97_collected
test17_k98_collected
test17_k99_collected
test17_k100_collected
test17_k101_collected
test17_k102_collected
test17_k103_collected
test17_k104_collected
test17_k105_collected
test17_k106_collected
test17_k107_collected
test17_k108_collected
test17_k109_collected
test17_k110_collected
test17_k111_collected
test17_k112_collected
test17_k113_collected
test17_k114_collected
test17_k115_collected
test17_k116_collected
test17_k117_collected
test17_k118_collected
test17_k119_collected
test17_k120_collected
test17_k121_collected
test17_k122_collected
test17_k123_collected
test17_k124_collected
test17_k125_collected
test17_k126_collected
test17_k127_collected
test17_k128_collected
test17_k129_collected
test17_k130_collected
test17_k131_collected
test17_k132_collected
test17_k133_collected
test17_k134_collected
test17_k135_collected
test17_k136_collected
test17_k137_collected
test17_k138_collected
test17_k139_collected
test17_k140_collected
test17_k141_collected
test17_k142_collected
test17_k143_collected
test17_k144_collected
test17_k145_collected
test17_k146_collected
test17_k147_collected
test17_k148_collected
test17_k149_collected
test17_k150_collected
test17_k151_collected
test17_k152_collected
test17_k153_collected
test17_k154_collected
test17_k155_collected
test17_k156_collected
test17_k157_collected
test17_k158_collected
test17_k159_collected
test17_k160_collected
test17_k161_collected
test17_k162_collected
test17_k163_collected
test17_k164_collected
test17_k165_collected
test17_k166_collected
test17_k167_collected
test17_k168_collected
test17_k169_collected
test17_k170_collected
test17_k171_collected
test17_k172_collected
test17_k173_collected
test17_k174_collected
test17_k175_collected
test17_k176_collected
test17_k177_collected
test17_k178_collected
test17_k179_collected
test17_k180_collected
test17_k181_collected
test17_k182_collected
test17_k183_collected
test17_k184_collected
test17_k185_collected
test17_k186_collected
test17_k187_collected
test17_k188_collected
test17_k189_collected
test17_k190_collected
test17_k191_collected
test17_k192_collected
test17_k193_collected
test17_k194_collected
test17_k195_collected
test17_k196_collected
test17_k197_collected
test17_k198_collected
test17_k199_collected
=== Test 18: Very long cycle across 5 WeakMaps ===
test18_k0_collected
test18_k1_collected
test18_k2_collected
test18_k3_collected
test18_k4_collected
test18_k5_collected
test18_k6_collected
test18_k7_collected
test18_k8_collected
test18_k9_collected
test18_k10_collected
test18_k11_collected
test18_k12_collected
test18_k13_collected
test18_k14_collected
test18_k15_collected
test18_k16_collected
test18_k17_collected
test18_k18_collected
test18_k19_collected
test18_k20_collected
test18_k21_collected
test18_k22_collected
test18_k23_collected
test18_k24_collected
test18_k25_collected
test18_k26_collected
test18_k27_collected
test18_k28_collected
test18_k29_collected
test18_k30_collected
test18_k31_collected
test18_k32_collected
test18_k33_collected
test18_k34_collected
test18_k35_collected
test18_k36_collected
test18_k37_collected
test18_k38_collected
test18_k39_collected
test18_k40_collected
test18_k41_collected
test18_k42_collected
test18_k43_collected
test18_k44_collected
test18_k45_collected
test18_k46_collected
test18_k47_collected
test18_k48_collected
test18_k49_collected
test18_k50_collected
test18_k51_collected
test18_k52_collected
test18_k53_collected
test18_k54_collected
test18_k55_collected
test18_k56_collected
test18_k57_collected
test18_k58_collected
test18_k59_collected
test18_k60_collected
test18_k61_collected
test18_k62_collected
test18_k63_collected
test18_k64_collected
test18_k65_collected
test18_k66_collected
test18_k67_collected
test18_k68_collected
test18_k69_collected
test18_k70_collected
test18_k71_collected
test18_k72_collected
test18_k73_collected
test18_k74_collected
test18_k75_collected
test18_k76_collected
test18_k77_collected
test18_k78_collected
test18_k79_collected
test18_k80_collected
test18_k81_collected
test18_k82_collected
test18_k83_collected
test18_k84_collected
test18_k85_collected
test18_k86_collected
test18_k87_collected
test18_k88_collected
test18_k89_collected
test18_k90_collected
test18_k91_collected
test18_k92_collected
test18_k93_collected
test18_k94_collected
test18_k95_collected
test18_k96_collected
test18_k97_collected
test18_k98_collected
test18_k99_collected
test18_k100_collected
test18_k101_collected
test18_k102_collected
test18_k103_collected
test18_k104_collected
test18_k105_collected
test18_k106_collected
test18_k107_collected
test18_k108_collected
test18_k109_collected
test18_k110_collected
test18_k111_collected
test18_k112_collected
test18_k113_collected
test18_k114_collected
test18_k115_collected
test18_k116_collected
test18_k117_collected
test18_k118_collected
test18_k119_collected
test18_k120_collected
test18_k121_collected
test18_k122_collected
test18_k123_collected
test18_k124_collected
test18_k125_collected
test18_k126_collected
test18_k127_collected
test18_k128_collected
test18_k129_collected
test18_k130_collected
test18_k131_collected
test18_k132_collected
test18_k133_collected
test18_k134_collected
test18_k135_collected
test18_k136_collected
test18_k137_collected
test18_k138_collected
test18_k139_collected
test18_k140_collected
test18_k141_collected
test18_k142_collected
test18_k143_collected
test18_k144_collected
test18_k145_collected
test18_k146_collected
test18_k147_collected
test18_k148_collected
test18_k149_collected
test18_k150_collected
test18_k151_collected
test18_k152_collected
test18_k153_collected
test18_k154_collected
test18_k155_collected
test18_k156_collected
test18_k157_collected
test18_k158_collected
test18_k159_collected
test18_k160_collected
test18_k161_collected
test18_k162_collected
test18_k163_collected
test18_k164_collected
test18_k165_collected
test18_k166_collected
test18_k167_collected
test18_k168_collected
test18_k169_collected
test18_k170_collected
test18_k171_collected
test18_k172_collected
test18_k173_collected
test18_k174_collected
test18_k175_collected
test18_k176_collected
test18_k177_collected
test18_k178_collected
test18_k179_collected
test18_k180_collected
test18_k181_collected
test18_k182_collected
test18_k183_collected
test18_k184_collected
test18_k185_collected
test18_k186_collected
test18_k187_collected
test18_k188_collected
test18_k189_collected
test18_k190_collected
test18_k191_collected
test18_k192_collected
test18_k193_collected
test18_k194_collected
test18_k195_collected
test18_k196_collected
test18_k197_collected
test18_k198_collected
test18_k199_collected
test18_k200_collected
test18_k201_collected
test18_k202_collected
test18_k203_collected
test18_k204_collected
test18_k205_collected
test18_k206_collected
test18_k207_collected
test18_k208_collected
test18_k209_collected
test18_k210_collected
test18_k211_collected
test18_k212_collected
test18_k213_collected
test18_k214_collected
test18_k215_collected
test18_k216_collected
test18_k217_collected
test18_k218_collected
test18_k219_collected
test18_k220_collected
test18_k221_collected
test18_k222_collected
test18_k223_collected
test18_k224_collected
test18_k225_collected
test18_k226_collected
test18_k227_collected
test18_k228_collected
test18_k229_collected
test18_k230_collected
test18_k231_collected
test18_k232_collected
test18_k233_collected
test18_k234_collected
test18_k235_collected
test18_k236_collected
test18_k237_collected
test18_k238_collected
test18_k239_collected
test18_k240_collected
test18_k241_collected
test18_k242_collected
test18_k243_collected
test18_k244_collected
test18_k245_collected
test18_k246_collected
test18_k247_collected
test18_k248_collected
test18_k249_collected
=== Test 19: Long chain (200) with external reference, all survive ===
=== Test 20: 5 WeakMaps with external reference, all survive ===
=== Test 21: Deep nesting with external reference, all survive ===
=== All tests completed ===
